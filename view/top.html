<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/top.css">
    <link href="https://use.fontawesome.com/releases/v6.2.0/css/all.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>トップページ</title>
    <style>
      .underline-red {
        text-decoration: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px;
      }
    </style>
</head>
<body>
  <!-- header部分 -->
  <div class="header">
    <img src="../img/header_logo.png" height="80px">
    <ul class="header-menu">
      <a href="./top.html"><li class="header-menu-item">TOP</li></a>
      <li class="header-menu-item">ユーザー名</li>
      <a href="./login.html"><li class="header-menu-item">ログアウト</li></a>
    </ul>
  </div>

  <!-- サイドバー -->
  <button id="toggle-btn">Open</button>
  <div class="sidebar">
    <nav>
      <ul>
        <a href="./top.html"><li>TOP</li></a>
        <a href="./zaiko.html"><li>在庫管理</li></a>
        <a href="./ec.html"><li>ECサイト更新</li></a>
        <a href="./kokyaku.html"><li>顧客管理</li></a>
        <a href="./kyujin.html"><li>求人管理</li></a>
        <a href="./oubosya.html"><li>応募者管理</li></a>
        <a href="./keiri.html"><li>経理管理</li></a>
        <a href="./kintai.html"><li>勤怠システム、シフト管理</li></a>
      </ul>
    </nav>
  </div>
    
  <!-- メイン -->
  <main class="main-content">
    <div class="calendar-container">
      <div id="calendar-current"></div>
      <div id="calendar-next"></div>
    </div>
    <!-- カードを追加 -->
    <div class="container mt-4">
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              在庫管理
            </div>
            <div class="card-body">
              <p class="card-text text-danger">消費期限間近の商品が発生しています！在庫を確認してください</p>
              <ul class="list-group-flush">
                <li class="list-group-item">
                  <h5>消費期限間近の商品</h5>
                  <table class="table">
                    <thead>
                      <tr>
                        <th>商品名</th>
                        <th>消費期限</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>牛乳</td>
                        <td>2025-04-20</td>
                      </tr>
                    </tbody>
                  </table>
                </li>
                <li class="list-group-item">
                  <h5>仕入予定</h5>
                  <table class="table">
                    <thead>
                      <tr>
                        <th>商品名</th>
                        <th>数量</th>
                        <th>仕入予定日</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>牛乳</td>
                        <td>20</td>
                        <td>2025-04-18</td>
                      </tr>
                      <tr>
                        <td>パン</td>
                        <td>30</td>
                        <td>2025-04-19</td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
              <a href="./zaiko.html" class="btn btn-primary mt-3">詳細を見る</a>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              求人管理
            </div>
            <div class="card-body">
              <p class="card-text text-danger">新規応募あり！</p>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <h5>新規応募</h5>
                  <table class="table">
                    <thead>
                      <tr>
                        <th>氏名</th>
                        <th>年齢</th>
                        <th>応募日</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>田中太郎</td>
                        <td>28</td>
                        <td>2025-04-01</td>
                      </tr>
                      <tr>
                        <td>山田次郎</td>
                        <td>25</td>
                        <td>2025-04-05</td>
                      </tr>
                    </tbody>
                  </table>
                </li>
              </ul>
              <a href="#" class="btn btn-primary">詳細を見る</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 予定の詳細表示モーダル -->
  <div id="event-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">予定詳細</div>
      <span class="close">&times;</span>
      <div id="event-details"></div>
    </div>
  </div>

    
  <script src="../js/common.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      function createCalendar(containerId, year, month, events) {
        const container = document.getElementById(containerId);
        const firstDay = new Date(year, month - 1, 1);
        const lastDay = new Date(year, month, 0);
        let html = `<div class="calendar-header">${year}年${month}月</div>`;
        html += `<table class="calendar"><thead><tr>`;
        const days = ["日", "月", "火", "水", "木", "金", "土"];
        
        days.forEach(day => html += `<th>${day}</th>`);
        html += `</tr></thead><tbody><tr>`;

        for (let i = 0; i < firstDay.getDay(); i++) {
          html += `<td></td>`;
        }

        for (let date = 1; date <= lastDay.getDate(); date++) {
          const fullDate = `${year}-${String(month).padStart(2, "0")}-${String(date).padStart(2, "0")}`;
          let eventClass = events[fullDate] ? "event-day" : "";
          const dayOfWeek = new Date(year, month - 1, date).getDay();
          if (dayOfWeek === 0) {
            eventClass += " sunday"; // 日曜日
          } else if (dayOfWeek === 6) {
            eventClass += " saturday"; // 土曜日
          }
          html += `<td class="${eventClass}" data-date="${fullDate}">${date}</td>`;
          if ((firstDay.getDay() + date) % 7 === 0) html += `</tr><tr>`;
        }

        html += `</tr></tbody></table>`;
        container.innerHTML = html;
      }

      const events = {
        "2025-04-10": [
          { title: "〇〇様予約", description: "注文No123予約受け取り（13:00）" },
          { title: "採用面接", description: "〇〇様採用面接実施（15:00）" }
        ],
        "2025-04-15": [
          { title: "納品日", description: "商品の納品予定" }
        ],
        "2025-05-05": [
          { title: "休業日", description: "ゴールデンウィークの休業" }
        ]
      };

      const today = new Date();
      createCalendar("calendar-current", today.getFullYear(), today.getMonth() + 1, events);
      createCalendar("calendar-next", today.getFullYear(), today.getMonth() + 2, events);

      document.querySelectorAll(".event-day").forEach(day => {
        day.addEventListener("click", function () {
          const date = this.dataset.date;
          const eventList = events[date];
          const eventDetails = document.getElementById("event-details");
          eventDetails.innerHTML = '';
          eventList.forEach(event => {
            const eventItem = document.createElement("div");
            eventItem.className = "event-item";
            eventItem.innerHTML = `
              <i class="fas fa-calendar-alt event-icon"></i>
              <h3 class="event-title">${event.title}</h3>
              <i class="fas fa-info-circle event-icon"></i>
              <p class="event-description">${event.description}</p>
            `;
            eventDetails.appendChild(eventItem);
          });
          document.getElementById("event-modal").style.display = "flex";
        });
      });

      document.querySelector(".close").addEventListener("click", function () {
        document.getElementById("event-modal").style.display = "none";
      });

      document.getElementById("event-modal").addEventListener("click", function (e) {
        if (e.target === this) {
          this.style.display = "none";
        }
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>